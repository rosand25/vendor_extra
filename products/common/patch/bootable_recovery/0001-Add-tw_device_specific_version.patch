From 29a73a1edd2d951c78875ad6402e6a962a5948ca Mon Sep 17 00:00:00 2001
From: sub77 <darfpunk@gmx.de>
Date: Tue, 20 Dec 2016 03:01:15 +0000
Subject: [PATCH] Add tw_device_specific_version

Change-Id: I3055c7f352c7f21adecb957b0ee07bdbbc0c6e02
Signed-off-by: sub77 <darfpunk@gmx.de>
---
 Android.mk  | 3 +++
 variables.h | 6 +++++-
 2 files changed, 8 insertions(+), 1 deletion(-)

diff --git a/Android.mk b/Android.mk
index 582b710..bcaf7e1 100644
--- a/Android.mk
+++ b/Android.mk
@@ -352,6 +352,9 @@ ifneq ($(TW_DEFAULT_LANGUAGE),)
 else
     LOCAL_CFLAGS += -DTW_DEFAULT_LANGUAGE=en
 endif
+ifneq ($(TW_DEVICE_SPECIFIC_VERSION),)
+    LOCAL_CFLAGS += -DTW_DEVICE_SPECIFIC_VERSION=\"$(TW_DEVICE_SPECIFIC_VERSION)\"
+endif
 
 LOCAL_ADDITIONAL_DEPENDENCIES += \
     dump_image \
diff --git a/variables.h b/variables.h
index 9cdbfb6..d06b7a9 100644
--- a/variables.h
+++ b/variables.h
@@ -17,7 +17,11 @@
 #ifndef _VARIABLES_HEADER_
 #define _VARIABLES_HEADER_
 
+#ifdef TW_DEVICE_SPECIFIC_VERSION
+#define TW_VERSION_STR TW_DEVICE_SPECIFIC_VERSION
+#else
 #define TW_VERSION_STR              "3.0.3-0"
+#endif
 
 #define TW_USE_COMPRESSION_VAR      "tw_use_compression"
 #define TW_FILENAME                 "tw_filename"
@@ -26,7 +30,7 @@
 
 #define MAX_BACKUP_NAME_LEN 64
 #define TW_BACKUP_TEXT              "tw_backup_text"
-#define TW_BACKUP_NAME		        "tw_backup_name"
+#define TW_BACKUP_NAME              "tw_backup_name"
 #define TW_BACKUP_SYSTEM_VAR        "tw_backup_system"
 #define TW_BACKUP_DATA_VAR          "tw_backup_data"
 #define TW_BACKUP_BOOT_VAR          "tw_backup_boot"
-- 
2.1.4

