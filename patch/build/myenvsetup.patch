From 595418dc61a82d9452fbbec4904621158c21724a Mon Sep 17 00:00:00 2001
From: sub77 <darfpunk@gmx.de>
Date: Tue, 20 Dec 2016 00:41:55 +0000
Subject: [PATCH] myenvsetup.sh

Change-Id: Ibeb3d0c8ed736b3820331e1fe1baa7713427f40b
Signed-off-by: sub77 <darfpunk@gmx.de>
---
 envsetup.sh | 24 ++++++++++++++++++++++++
 1 file changed, 24 insertions(+)

diff --git a/envsetup.sh b/envsetup.sh
index ee6dcdf..519b3b9 100644
--- a/envsetup.sh
+++ b/envsetup.sh
@@ -291,12 +291,36 @@ function printconfig()
     get_build_var report_config
 }
 
+function patchcommontree()
+{
+for f in `test -d device && find -L vendor/extra/products/common/patch -maxdepth 4 -name 'apply.sh' 2> /dev/null`
+do
+    echo -e ${CL_BLU}"\nPatching common-tree -> $f\n"${CL_RST}
+    . $f
+done
+
+unset f
+}
+
+function patchdevicetree()
+{
+for f in `test -d device && find -L vendor/extra/products/$DU_BUILD/patch -maxdepth 4 -name 'apply.sh' 2> /dev/null`
+do
+    echo -e ${CL_MAG}"\nPatching device-tree -> $f\n"${CL_RST}
+    . $f
+done
+
+unset f
+}
+
 function set_stuff_for_environment()
 {
     settitle
     set_java_home
     setpaths
     set_sequence_number
+    patchcommontree
+    patchdevicetree
 
     export ANDROID_BUILD_TOP=$(gettop)
     # With this environment variable new GCC can apply colors to warnings/errors
-- 
2.1.4

